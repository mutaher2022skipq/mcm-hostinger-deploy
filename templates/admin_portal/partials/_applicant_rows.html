{% for app in applications %}
<tr class="hover:bg-gray-50">

  <!-- Checkbox -->
  <td class="py-3 px-3">
    <input class="bulk-check" type="checkbox" value="{{ app.id }}">
  </td>

  <!-- ID -->
  <td class="py-3 px-3 font-medium text-gray-900">{{ app.id }}</td>

  <!-- Name -->
  <td class="py-3 px-3 font-medium text-gray-900">{{ app.name }}</td>

  <!-- Father -->
  <td class="py-3 px-3 text-gray-700">{{ app.father_name }}</td>

  <!-- Category -->
  <td class="py-3 px-3 text-gray-700">
    {{ app.get_category_display|default:"None" }}
  </td>

  <!-- â­ SHAHEED COLUMN (NEW) -->
  <td class="py-3 px-3">
    {% if app.admin_remarks %}
      {% if "Shaheed" in app.admin_remarks %}
        <span class="inline-block px-3 py-1 rounded-full bg-red-100 text-red-700 text-xs font-semibold">
          ğŸŸ¥ Shaheed
        </span>
      {% elif "In Service Death" in app.admin_remarks %}
        <span class="inline-block px-3 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs font-semibold">
          ğŸŸ¨ In Service Death
        </span>
      {% else %}
        â€”
      {% endif %}
    {% else %}
      â€”
    {% endif %}
  </td>

  <!-- Status -->
  <td class="py-3 px-3">
    {% if app.status == 'verified' %}
      <span class="inline-block px-3 py-1 rounded-full bg-green-100 text-green-800 text-xs font-semibold">
        Verified
      </span>
    {% elif app.status == 'rejected' %}
      <span class="inline-block px-3 py-1 rounded-full bg-red-100 text-red-800 text-xs font-semibold">
        Rejected
      </span>
    {% elif app.status == 'submitted' %}
      <span class="inline-block px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-xs font-semibold">
        Submitted
      </span>
    {% elif app.payment_status == 'under_review' %}
      <span class="inline-block px-3 py-1 rounded-full bg-yellow-100 text-yellow-800 text-xs font-semibold">
        Under Review
      </span>
    {% else %}
      <span class="inline-block px-3 py-1 rounded-full bg-gray-100 text-gray-800 text-xs font-semibold">
        {{ app.status|title }}
      </span>
    {% endif %}
  </td>

  <!-- Payment Status -->
  <td class="py-3 px-3 text-gray-700">
    {{ app.payment_status|title }}
  </td>

  <!-- Test Center -->
  <td class="py-3 px-3 text-gray-700">
    {{ app.get_test_center_display|default:"â€”" }}
  </td>

  <!-- Roll Number -->
  <td class="py-3 px-3 font-semibold text-gray-900">
    {{ app.roll_number|default:"â€”" }}
  </td>

  <!-- Actions -->
  <td class="py-3 px-3 text-center">
    <div class="flex items-center justify-center gap-2">

      <button onclick="openChallanModal({{ app.id }})"
              class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1.5 rounded text-xs font-semibold">
        ğŸ‘ View
      </button>

      <button onclick="confirmAction('{{ app.id }}','verify')"
              class="bg-green-500 hover:bg-green-600 text-white px-3 py-1.5 rounded text-xs font-semibold">
        âœ… Verify
      </button>

      <button onclick="confirmAction('{{ app.id }}','reject')"
              class="bg-red-500 hover:bg-red-600 text-white px-3 py-1.5 rounded text-xs font-semibold">
        âŒ Reject
      </button>

    </div>
  </td>

</tr>
{% empty %}
<tr>
  <td colspan="11" class="text-center text-gray-500 py-6">
    No applications found.
  </td>
</tr>
{% endfor %}


{# PAGINATION CONTROLS #}
{% if page_obj.paginator.num_pages > 1 %}
<tr>
  <td colspan="11" class="py-4 text-center">

    {% if page_obj.has_previous %}
      <button class="pagination-btn px-3 py-1 bg-gray-200 rounded mx-1"
              data-page="{{ page_obj.previous_page_number }}">
        Â« Prev
      </button>
    {% else %}
      <span class="px-3 py-1 text-gray-400 mx-1">Â« Prev</span>
    {% endif %}

    <span class="font-semibold mx-3">
      Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
    </span>

    {% if page_obj.has_next %}
      <button class="pagination-btn px-3 py-1 bg-gray-200 rounded mx-1"
              data-page="{{ page_obj.next_page_number }}">
        Next Â»
      </button>
    {% else %}
      <span class="px-3 py-1 text-gray-400 mx-1">Next Â»</span>
    {% endif %}

  </td>
</tr>
{% endif %}
